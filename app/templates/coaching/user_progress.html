{% extends "base.html" %}
{% block content %}
<a href="{{ url_for('coaching.plan_progress', plan_id=plan.id) }}" class="btn btn-secondary mb-3">&larr;â€¯Backâ€¯toâ€¯Planâ€¯Progress</a>
<h2>Progressâ€¯Detailsâ€¯â€”â€¯{{ user.username }}</h2>
<p class="text-muted">
  Plan: <strong>{{ plan.title }}</strong>â€ƒâ€¢â€ƒDueâ€¯{{ plan.due_date.strftime("%Y-%m-%d")â€¯ifâ€¯plan.due_dateâ€¯elseâ€¯"â€”" }}
</p>

<h4>ğŸ“˜â€¯Coursesâ€¯(fromâ€¯Library)</h4>
<table class="table table-sm table-bordered">
  <thead><tr><th>Course</th><th>Status</th></tr></thead>
  <tbody>
    {% for c in courses %}
      <tr>
        <td>{{ c.title }}</td>
        <td>{% if c.viewed %}âœ…â€¯Viewed{% else %}âŒâ€¯Notâ€¯Viewed{% endif %}</td>
      </tr>
    {% else %}
      <tr><td colspan="2" class="text-muted">Noâ€¯coursesâ€¯assignedâ€¯toâ€¯thisâ€¯plan.</td></tr>
    {% endfor %}
  </tbody>
</table>

<h4 class="mt-4">ğŸ§ â€¯Tests</h4>
<table class="table table-sm table-bordered">
  <thead><tr><th>Test</th><th>Scoreâ€¯(%)</th><th>Lastâ€¯Submission</th></tr></thead>
  <tbody>
    {% for t in tests %}
      <tr>
        <td>{{ t.title }}</td>
        <td>{{ t.score }}</td>
        <td>{{ t.submitted_at | tz("%Y-%m-%d %H:%M") }}</td>
      </tr>
    {% else %}
      <tr><td colspan="3" class="text-muted">Noâ€¯testsâ€¯assignedâ€¯toâ€¯thisâ€¯plan.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}